"use strict";(self.webpackChunk_genially_view_client=self.webpackChunk_genially_view_client||[]).push([[3567],{45577:(e,i,t)=>{t.d(i,{q:()=>r});var n=t(45992),l=t(17588),d=t(66264),s=t(60708),o=t(90936),m=t(5441);const r=e=>{let{getItems:i,item:t,menuType:r,theme:u,shouldCloseWhenClickOutside:c=!1,itemSize:a,menuTheme:h}=e;const[g,v]=(0,l.useState)(i()),[f,p]=(0,l.useState)(!1),T=(0,l.useCallback)((()=>{p((e=>!e))}),[]);(0,l.useEffect)((()=>{const e=null===t||void 0===t?void 0:t.on(d.q.Message,(e=>{e===s.m.Entering&&(v(i()),p(!1))}));return()=>{null===e||void 0===e||e()}}),[i,t]);const S=function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=(0,l.useRef)(null);return(0,l.useEffect)((()=>{const n=i=>{t.current&&!t.current.contains(i.target)&&e(i)};return document.addEventListener("mouseup",n,i),document.addEventListener("touchend",n,i),()=>{document.removeEventListener("mouseup",n,i),document.removeEventListener("touchend",n,i)}}),[t,e,i]),t}((0,l.useCallback)((()=>{c&&f&&p(!1)}),[f,c]),!0);(0,l.useEffect)((()=>{v(i())}),[i]);const y=(0,o.CO)(r);return(0,m.T)({theme:u,children:(0,n.jsx)(y,{items:g,onToggleClick:T,opened:f,ref:S,theme:u,itemSize:a,menuTheme:h})})}},33567:(e,i,t)=>{t.r(i),t.d(i,{geniallyMenuEditorScript:()=>C});var n=t(45992),l=t(57277),d=t(45577),s=t(54769),o=t(15536),m=t(55904),r=t(54591),u=t(5441);const c=(e,i,t,l)=>{const{width:d}=((e,i,t)=>{const l=(0,r.d)((0,u.T)({theme:i,children:(0,n.jsx)(m.I,{items:e,menuTheme:t})}));return{width:l.width+2*o.I,height:l.height+2*o.I}})(i,t,l);return{itemsAreOverflowing:d>e,minimalWidth:d}};var a,h=t(89035);!function(e){e[e.MD=380]="MD"}(a||(a={}));const g=e=>e<=a.MD?s.L.Hamburger:s.L.Horizontal;var v=t(93918);const f=(e,i,t)=>n=>{let{item:l,size:d}=n;const{item:o}=i;if(!o||l.id!==o.id||!o.exists)return;const{menuTheme:m,menuItems:r,menuType:u}=i.getConfig(),a=g(d.width),h=g(o.width),f=a!==h,p=d.width!==o.width,T=()=>c(d.width,(0,v.N)(r),e.theme,m),S=e=>{e!==u&&i.mutateConfig((i=>{t(!1),i.menuType=e}))};if(f){const{itemsAreOverflowing:e}=T();S(e?s.L.Hamburger:s.L.Horizontal)}else p&&(()=>{const{itemsAreOverflowing:e}=T();S(e?s.L.Hamburger:a)})()},p=function(e,i,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var l;if(!i||!i.exists)return;const d=i,{menuType:o,menuTheme:m}=t;if(n){if(o===s.L.Horizontal){const{minimalWidth:n}=c(i.width,(0,v.N)(t.menuItems),e.theme,m),r=(e=>{switch(e){case s.L.Horizontal:return{minWidth:a.MD,maxWidth:void 0};case s.L.Hamburger:return{minWidth:h.N_.width,maxWidth:a.MD};default:return{minWidth:void 0,maxWidth:void 0}}})(o),u=d.parentSlide.size.width-24,g=Math.min(n,u),f=Math.max(null!==(l=r.minWidth)&&void 0!==l?l:0,g);d.setSize(f,h.cE.height),d.setPosition((d.parentSlide.size.width-f)/2,d.y)}o===s.L.Hamburger&&d.setSize(h.N_.width,h.N_.height)}};var T=t(15938),S=t(90936);let y=!0;const w=e=>{y=e},C=e=>{let{script:i,editor:t}=e;t.on("slideCreated",(e=>{let{slide:t}=e;((e,i)=>{!1===e.getConfig().slidesToDisplay.allSlidesSelected&&e.item.excludedSlidesIds.push(i.id)})(i,t)})),t.on("slideDeleted",(e=>{let{slide:n}=e;((e,i)=>{1===e.getSlides().length&&i.mutateConfig((e=>{e.slidesToDisplay.allSlidesSelected=!0,e.slidesToDisplay.selectedSlides=[]}))})(t,i),((e,i)=>{const{allSlidesSelected:t,selectedSlides:n}=e.getConfig().slidesToDisplay;if(!t)if(null===n||void 0===n?void 0:n.includes(i.id))e.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=e.slidesToDisplay.selectedSlides.filter((e=>e!==i.id))}));else{const t=e.item;t.excludedSlidesIds=t.excludedSlidesIds.filter((e=>e!==i.id))}})(i,n)})),i.once("configChange",(()=>{(e=>{let{editor:i,script:t}=e;0===t.getConfig().slidesToDisplay.selectedSlides.length&&t.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=i.getSlides().map((e=>e.id))}))})({editor:t,script:i})})),i.on("configChange",(e=>{let{config:n,prevConfig:l}=e;const d=i.item;n.menuType!==(null===l||void 0===l?void 0:l.menuType)&&(e=>{let{item:i,config:t}=e;if(!i||!i.exists)return;const n=i,{menuType:l,menuTheme:d}=t,s=(0,S.FB)(l);n.thumbnail=d===T.N.Dark?s.dark:s.light})({item:d,config:n}),y&&n.menuType!==(null===l||void 0===l?void 0:l.menuType)&&p(t,d,n,!0),y||(y=!0),((e,i,t,n)=>{e.item&&e.item.exists&&(function(e){const{item:i}=e,t=i;t.isTransversal||(t.isTransversal=!0)}(e),function(e,i,t){const n=t.slidesToDisplay.selectedSlides.filter((e=>i.getSlides().find((i=>i.id===e))));n.length!==t.slidesToDisplay.selectedSlides.length&&e.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=n}))}(e,i,t),function(e,i,t,n){const{item:l}=e,d=l;(t.slidesToDisplay.allSlidesSelected!==(null===n||void 0===n?void 0:n.slidesToDisplay.allSlidesSelected)||t.slidesToDisplay.selectedSlides!==(null===n||void 0===n?void 0:n.slidesToDisplay.selectedSlides))&&(d.excludedSlidesIds=function(e,i){if(e.slidesToDisplay.allSlidesSelected)return[];const t=i.getSlides(),n=e.slidesToDisplay.selectedSlides||[];return t.filter((e=>!n.includes(e.id))).map((e=>e.id))}(t,i),e.mutateConfig((e=>{e.slidesToDisplay.allSlidesSelected&&(e.slidesToDisplay.selectedSlides=[])})))}(e,i,t,n))})(i,t,n,l),d&&!d.showOverflow&&(d.showOverflow=!0)})),t.on("itemResize",f(t,i,w)),(0,l.x)({getTargetNodeItem:()=>i.item,renderApp:()=>{var e,l;const{theme:s}=t,{item:o}=i,{menuItems:m,menuTheme:r,menuType:u}=i.getConfig();return(0,n.jsx)(d.q,{getItems:()=>(0,v.N)(m),menuType:u,theme:s,itemSize:{width:null!==(e=null===o||void 0===o?void 0:o.width)&&void 0!==e?e:0,height:null!==(l=null===o||void 0===o?void 0:o.height)&&void 0!==l?l:0},menuTheme:r})},nodePrefix:"menu"})({script:i,editor:t})}},93918:(e,i,t)=>{t.d(i,{N:()=>s,e:()=>m});var n=t(48237),l=t(22077);const d=e=>""===e?(0,l.A)("__new.view.widget.menu.sidebar.emptyTitlePlaceholder"):e,s=e=>e.map(((e,i)=>{var t;const l=(null===(t=e.menuItemAction.action)||void 0===t?void 0:t.type)===n.L.GoToSlide;return{text:d(e.menuItemName),key:i,onClick:()=>{},isLink:l,isActive:!1,isAllowed:l,altText:e.altText}})),o={active:!1,allowed:!1},m=(e,i)=>e.map(((e,t)=>{var l,s;const m=!!(null===(l=e.menuItemAction)||void 0===l?void 0:l.data)&&(null===(r=e.menuItemAction.data)||void 0===r?void 0:r.type)===n.L.GoToSlide;var r;const{active:u,allowed:c}=m&&(null===(s=e.menuItemAction)||void 0===s?void 0:s.data)?i.getGoToSlideState(e.menuItemAction.data):o;return{text:d(e.menuItemName),key:t,onClick:()=>{var i;return null===(i=e.menuItemAction)||void 0===i?void 0:i.run()},isLink:m,isActive:u,isAllowed:c,altText:e.altText}}))},57277:(e,i,t)=>{t.d(i,{x:()=>l});var n=t(70377);function l(e){let{getTargetNodeItem:i,renderApp:t,nodePrefix:l}=e;return e=>{let{script:d,editor:s}=e,o=null;function m(e){o&&(n.unmountComponentAtNode(o),o=null),e&&"innerHtml"in e&&(e.innerHtml='<div class="card-iframe"><div style="width: 100%; height: 100%; background: #FF0000; color: #FFFFFF;">Deleted</div><script><\/script></div>')}function r(){o&&n.render(t(),o)}function u(){const e=i(d.getConfig());if(!e)return;const t=`${l}-${e.id}`;"innerHtml"in e&&(e.innerHtml=`<div class="card-iframe"><div id="${t}" class="genially-widget-app" style="width: 100%; height: 100%;"></div></div>`),requestAnimationFrame((()=>{o="idOfFreeNode"in e?document.getElementById(e.idOfFreeNode):document.getElementById(t),r()}))}d.on("configChange",(e=>{let{config:t,prevConfig:n}=e;const l=i(t),d=n?i(n):void 0;d&&d!==l&&m(d),l&&(l!==d?u():r())})),d.on("dispose",(()=>{m(i(d.getConfig()))})),s.on("itemMount",(e=>{let{item:i}=e;i===d.item&&u()})),s.on("itemUnmount",(e=>{let{item:i}=e;i===d.item&&m()}))}}}}]);
//# sourceMappingURL=https://s3-static-genially.genially.com/view/static/js/3567.0b5324ad.chunk.js.map